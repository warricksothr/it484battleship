{"ts":1354367604803,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function UI() {\n    this.showShipMap = function() {\n        if(false) {\n            document.getElementById('one').style.display = \"none\";\n            document.getElementById('shipone').style.display = \"block\";\n            return true;\n        }\n        else {\n            document.getElementById('two').style.display = \"none\";\n            document.getElementById('shiptwo').style.display = \"block\";\n            return true;\n        }\n        \n    };\n    \n    this.hideShipMap = function() {\n        if(false) {\n            document.getElementById('one').style.display = \"none\";\n            document.getElementById('shipone').style.display = \"block\";\n            return true;\n        }\n        else {\n            document.getElementById('two').style.display = \"none\";\n            document.getElementById('shiptwo').style.display = \"block\";\n            return true;\n        }\n        \n    };\n    \n    this.createShipGrid = function() {\n        var ship = engine.getShipGrids();\n        for (var i = 0; i < 10; i++) {\n                document.writeln(\"<tr id='r\"+i+\"'>\");\n                for (var j = 0; j < 10; j++) {\n                document.writeln(\"<td class='cloud' id='c\" + j + \"'>\"+ship[j][i]+\"</td>\");\n            }\n            document.writeln(\"</tr>\");\n        }\n    };\n    \n    this.createShotGrid = function() {\n        var shot = engine.getShotGrids();\n        for (var i = 0; i < 10; i++) {\n            document.writeln(\"<tr id='r\"+i+\"'>\");\n            for (var j = 0; j < 10; j++) {\n                document.writeln(\"<td class='cloud' id='c\" + j + \"'>\"+shot[j][i]+\"</td>\");\n            }\n            document.writeln(\"</tr>\");\n        }\n    };\n}"]],"start1":0,"start2":0,"length1":0,"length2":1658}]],"length":1658}
{"contributors":["nerian.drew@gmail.com"],"silentsave":false,"ts":1354399525061,"patch":[[{"diffs":[[0," UI("],[-1,") {\n    this.showShipMap = function() {\n        if(false) {\n            document.getElementById('one').style.display = \"none\";\n            document.getElementById('shipone').style.display = \"block\";\n            return true;\n        }\n        else {\n            document.getElementById('two').style.display = \"none\";\n            document.getElementById('shiptwo').style.display = \"block\";\n            return true;\n        }\n        \n    };\n    \n    this.hideShipMap = function() {\n        if(false) {\n            document.getElementById('one').style.display = \"none\";\n            document.getElementById('shipone').style.display = \"block\";\n            return true;\n        }\n        else {\n            document.getElementById('two').style.display = \"none\";\n            document.getElementById('shiptwo').style.display = \"block\";\n            return true;\n        }\n        \n    };\n    \n    this.createShipGrid = function() {\n        var ship = engine.getShipGrids();\n        for (var i = 0; i < 10; i++) {\n                document.writeln(\"<tr id='r\"+i+\"'>\");\n                for (var j = 0; j < 10; j++) {\n                document.writeln(\"<td class='cloud' id='c\" + j + \"'>\"+ship[j][i]+\"</td>\");\n            }\n            document.writeln(\"</tr>\");\n        }\n    };\n    \n    this.createShotGrid = function() {\n        var shot = engine.getShotGrids();\n        for (var i = 0; i < 10; i++) {\n            document.writeln(\"<tr id='r\"+i+\"'>\");\n            for (var j = 0; j < 10; j++) {\n                document.writeln(\"<td class='cloud' id='c\" + j + \"'>\"+shot[j][i]+\"</td>\");\n            }\n            document.writeln(\"</tr>\");\n        }\n    };\n}"],[1,"engine)\n{\n    ////////////////////\n    // Initialization //\n    ////////////////////\n    \n    //Always load after engine.js to ensure the latest engine is linked\n    this.engine = engine;\n    \n    ////////////////////\n    // Global Helpers //\n    ////////////////////\n    \n    // element to empty a dom element identified by id\n    this.helperEmptyElementById = function(elementId){\n        var element = this.helperGetElementById(elementId);\n        this.helperEmptyElement(element);\n    };\n    \n    // element to empty a dom element\n    this.helperEmptyElement = function(element){\n        while(element.hasChildNodes())\n        {\n            element.removeChild(element.firstChild);\n        }\n    };\n    \n    //write the html to the requested element\n    this.helperAppendHTMLToElementById = function(elementId, htmlToWrite)\n    {\n        var parentElement = this.helperGetElementById(elementId);\n        //insert our html into the parent element\n        this.helperAppendHTMLToElement(parentElement, htmlToWrite);\n    };\n    \n    //write HTML to the body of an element\n    this.helperAppendHTMLToElement = function(element, htmlToWrite)\n    {\n        element.innerHTML = element.innerHTML + htmlToWrite;\n    };\n    \n    //append an element as a child to a parent element\n    this.helperAppendChildElement = function(parentElement, childElement)\n    {\n        parentElement.appendChild(childElement);\n    };\n    \n    //helper method to construct an dom element\n    this.helperCreateElement = function(elementName, elementAttributes, elementTextContent)\n    {\n        var newElement = document.createElement(elementName);\n        //loop through all the properties of elementAttributes and add them as attributes\n        for(var propt in elementAttributes){\n            //add an attribute based on the name with a value from the property\n            newElement.setAttribute(propt, elementAttributes[propt]);\n        }\n        newElement.textContent = elementTextContent;\n        return newElement;\n    };\n    \n    //simply retreve a dom element from the current document identified by id\n    this.helperGetElementById = function(elementId)\n    {\n        return document.getElementById(elementId);\n    };\n    \n    ////////////////////\n    // Update Methods //\n    ////////////////////\n    \n    //updates the user interface\n    this.updateInterface = function(params)\n    {\n        //autopopulate the params with defaults if we weren't passed some\n        if (typeof(params) === 'undefined')\n        {\n            params = {\n            historyID:\"history\",\n            shotID:\"shot\",\n            ship:\"ship\",\n            shipViewID:\"shipview\"\n            };\n        }\n        //create the history\n        this.createHistory(params.historyID);\n        //create the shot grid\n        this.createShotGrid(params.shotID);\n        //create the ship grid\n        this.createShipGrid(params.shipID);\n        //hide the ship grid by default\n        this.hideShipGrid();\n        //create the ship view\n        this.createShipView(params.shipViewID);\n    };\n    \n    ////////////////////////////////////\n    // Show/Hide Ship Grids Functions //\n    ////////////////////////////////////\n    \n    this.showShipGrid = function()\n    {\n        document.getElementById('shot').style.display = \"none\";\n        document.getElementById('ship').style.display = \"block\";\n    };\n    \n    this.hideShipGrid = function()\n    {\n        document.getElementById('shot').style.display = \"block\";\n        document.getElementById('ship').style.display = \"none\";\n    };\n    \n    ////////////////////////////\n    // Grid drawing functions //\n    ////////////////////////////\n    \n    // for shot grids //\n    \n    //helper method to create the correct grid type from the cell\n    this.helperGetShotGridCell = function(type, j)\n    {\n        var classType = \"\";\n        var typeToDisplay = \"U\";\n        //switch on the type in the cell \n        switch(type)\n        {\n            //fog of war\n            case 0: \n                classType = \"cloud\";\n                typeToDisplay = \"F\";\n                break;\n            //miss\n            case 1: \n                classType = \"miss\";\n                typeToDisplay = \"M\";\n                break;\n            //hit\n            case 2: \n                classType = \"hit\";\n                typeToDisplay = \"H\";\n                break;\n            //reveal miss\n            case 3: \n                classType = \"revealmiss\";\n                typeToDisplay = \"RM\";\n                break;\n            //reveal hit\n            case 4: \n                classType = \"revealhit\";\n                typeToDisplay = \"RH\";\n                break;\n        }\n        var gridCell = this.helperCreateElement(\"td\", {\"class\":classType, \"id\":\"c\" + j}, typeToDisplay);\n        //by now gridCell should represent like this if it is a type 0 and j is 0 (<td class='cloud' id='c0'>0</td>)\n        return gridCell;\n    };\n    \n    //helper method to draw the supplied grid\n    this.helperCreateShotGrid = function(grid, gridElementId)\n    {\n        //empty the grid\n        this.helperEmptyElementById(gridElementId);\n        //get the container\n        var rootElement = this.helperGetElementById(gridElementId);\n        //create the table\n        var table = this.helperCreateElement(\"table\", {}, \"\");\n        for (var i = 0; i < 10; i++) {\n            //write the row to the table body\n            var row = this.helperCreateElement(\"tr\", {id:\"r\"+i},\"\");\n            for (var j = 0; j < 10; j++) {\n                //write a column to the table\n                //get the appropriate cell contents and write the column\n                var gridCell = this.helperGetShotGridCell(grid[j][i], j);\n                this.helperAppendChildElement(row, gridCell);\n            }\n            //add the row to the table\n            this.helperAppendChildElement(table, row);\n        }\n        //finally write the table to the root element\n        this.helperAppendChildElement(rootElement, table);\n    };\n    \n    //draw the current players shot grid\n    this.createShotGrid = function(gridElementId)\n    {\n        if(!gridElementId) { gridElementId = \"shot\"; }\n        var grid = this.engine.getShotGrid();\n        this.helperCreateShotGrid(grid, gridElementId);\n    };\n    \n    // for ship grids //\n    \n    //helper method to create the correct grid type from the cell\n    this.helperGetShipGridCell = function(type, enemyType, j)\n    {\n        var classType = \"\";\n        var typeToDisplay = \"U\";\n        //switch on the type in the cell\n        switch(enemyType)\n        {\n            //fog of war\n            case 0: \n                classType = \"cloud\";\n                typeToDisplay = \"F\"\n                break;\n            //miss\n            case 1: \n                classType = \"miss\";\n                typeToDisplay = \"M\"\n                break;\n            //hit on one of our ships\n            case 2: \n                classType = \"shiphit\";\n                typeToDisplay = type.name[0];\n                break;\n            //reveal miss\n            case 3: \n                classType = \"revealmiss\";\n                typeToDisplay = \"RM\"\n                break;\n            //reveal hit\n            case 4: \n                classType = \"revealhit\";\n                typeToDisplay = \"RH-\" + type.name[0];\n                break;\n        }\n        //miss on one of our ships\n        if (enemyType === 0 && type !== 0)\n        {\n            classType = \"shipmiss\";\n            typeToDisplay = type.name[0];\n        }\n        var gridCell = this.helperCreateElement(\"td\", {\"class\":classType, \"id\":\"c\" + j}, typeToDisplay);\n        //by now gridCell should represent like this if it is a type 0 and j is 0 (<td class='cloud' id='c0'>0</td>)\n        return gridCell;\n    };\n    \n    //helper method to draw the supplied grid\n    this.helperCreateShipGrid = function(grid, enemyShotGrid, gridElementId)\n    {\n        //empty the grid\n        this.helperEmptyElementById(gridElementId);\n        //get the container\n        var rootElement = this.helperGetElementById(gridElementId);\n        //create the table\n        var table = this.helperCreateElement(\"table\", {}, \"\");\n        for (var i = 0; i < 10; i++) {\n            //write the row to the table body\n            var row = this.helperCreateElement(\"tr\", {id:\"r\"+i},\"\");\n            for (var j = 0; j < 10; j++) {\n                //write a column to the table\n                //get the appropriate cell contents and write the column\n                var gridCell = this.helperGetShipGridCell(grid[j][i], enemyShotGrid[j][i], j);\n                this.helperAppendChildElement(row, gridCell);\n            }\n            //add the row to the table\n            this.helperAppendChildElement(table, row);\n        }\n        //finally write the table to the root element\n        this.helperAppendChildElement(rootElement, table);\n    };\n    \n    //draw the current player's ship grid\n    this.createShipGrid = function(gridElementId)\n    {\n        if(!gridElementId) { gridElementId = \"ship\"; }\n        var grid = this.engine.getShipGrid();\n        var enemyShotGrid = this.engine.getEnemyShotGrid();\n        this.helperCreateShipGrid(grid, enemyShotGrid,  gridElementId);\n    };\n    \n    ///////////////////////\n    // History Functions //\n    ///////////////////////\n    \n    //show the history for the current player\n    this.createHistory = function(gridElementId)\n    {\n        var rootElement = this.helperGetElementById(gridElementId);\n        //empty the current history\n        this.helperEmptyElement(rootElement);\n        //create the heading\n        var heading = this.helperCreateElement(\"h2\", {\"class\":\"headings\"}, \"History\");\n        this.helperAppendChildElement(rootElement, heading);\n        \n        //populate the history\n        var history = this.engine.getShotHistory();\n        //print out \"no history\" if there is no history yet\n        if (!history || history.length < 1)\n        {\n            var noHist = this.helperCreateElement(\"span\", {}, \"No History\");\n            this.helperAppendChildElement(rootElement, noHist);\n        }\n        //otherwise print the history\n        else\n        {\n            //need to implement a limit (aka. recent history otherwise we will over flow, we could also make it a scrollable box)\n            for (var i = 0; i < history.length; i++)\n            {\n                //write out the history\n                var hist = this.helperCreateElement(\"span\", {id:\"historyRow\"}, history[i]);\n                this.helperAppendChildElement(rootElement, hist);\n                //append a line break\n                this.helperAppendHTMLToElement(rootElement, \"<br>\");\n            }\n        }\n    };\n    \n    /////////////////////////\n    // Ship View Functions //\n    /////////////////////////\n    \n    //a helper method to determine if a cell should be red or not\n    this.helperShipViewGetClass = function(ship, currentCount)\n    {\n        if (currentCount < ship.damage)\n        {\n            return \"segmenthit\";\n        }\n        else\n        {\n            return \"segment\";\n        }\n    };\n    \n    this.createShipView = function(shipViewElementId)\n    {\n        //get a list of the current player ships\n        var ships = engine.getPlayerShips();\n        //get access to the root element in the DOM\n        var rootElement = this.helperGetElementById(shipViewElementId);\n        //empty the element\n        this.helperEmptyElement(rootElement);\n        //loop through the ships and create the elements\n        for (var i = 0; i < ships.length; i++)\n        {\n            //get the ship\n            var ship = ships[i];\n            //create an element for this ship\n            var shipElement = this.helperCreateElement(\"div\", {id:ship.name, \"class\":\"ship\"}, \"\");\n            //loop through each cell in the length of the ship\n            for (var x = 0; x < ship.shipLength; x++)\n            {\n                //determine if the section should be hit or not\n                var cellClass = this.helperShipViewGetClass(ship, x);\n                //create the cell for the ship\n                var shipCellElement = this.helperCreateElement(\"div\", {id:\"s\"+(i+1)+\"p\"+(x+1), \"class\":cellClass}, \"\");\n                //append it to the ship\n                this.helperAppendChildElement(shipElement, shipCellElement);\n            }\n            //append the ship to the root\n            this.helperAppendChildElement(rootElement, shipElement);\n        }\n    };\n}\n\n//create a new UI instance and import ENGINE into it\nvar UI = new UI(ENGINE);"]],"start1":8,"start2":8,"length1":1650,"length2":12526}]],"length":12534,"saved":false}
{"ts":1354432983405,"patch":[[{"diffs":[[0,"rapper ="],[-1," ="],[0," this.he"]],"start1":16882,"start2":16882,"length1":18,"length2":16}]],"length":18853,"saved":false}
{"ts":1354433077133,"patch":[[{"diffs":[[0,"    "],[-1,"//text on the outside\n            var shotcooldown"],[1,"shotWrapper"],[0," = t"]],"start1":16067,"start2":16067,"length1":58,"length2":19},{"diffs":[[0,"  //"],[-1,"opacity layer to block out the shot"],[1,"= this.helperCreateElement(\"div\", {\"class\":\"shotwrapper\"}, \"\");\n            //text on the outside"],[0,"\n   "]],"start1":16180,"start2":16180,"length1":43,"length2":105},{"diffs":[[0,"    var "],[-1,"opacityLay"],[1,"shotWrapperInn"],[0,"er = thi"]],"start1":16290,"start2":16290,"length1":26,"length2":30},{"diffs":[[0,"s\":\""],[-1,"."],[0,"shot"],[-1,"cooldown"],[1,"wrapper"],[0,"\"}, "]],"start1":16355,"start2":16355,"length1":21,"length2":19},{"diffs":[[0,"ent("],[-1,"opacityLayer, shotElement);\n            //append opacity to the shotWrapper\n            this.helperAppendChildElement(shotWrapper,shotcooldown"],[1,"shotWrapperInner,shotElement"],[0,");\n "]],"start1":16565,"start2":16565,"length1":150,"length2":36},{"diffs":[[0,"per,"],[-1,"opacityLay"],[1,"shotWrapperInn"],[0,"er);"]],"start1":16695,"start2":16695,"length1":18,"length2":22}]],"length":18768,"saved":false}
{"ts":1354433091132,"patch":[[{"diffs":[[0,"r);\n"],[-1,"            //= this.helperCreateElement(\"div\", {\"class\":\"shotwrapper\"}, \"\");\n"],[0,"    "]],"start1":16166,"start2":16166,"length1":86,"length2":8}]],"length":18690,"saved":false}
{"ts":1354433166114,"patch":[[{"diffs":[[0,"down"],[-1,"tim"],[1,"wrapp"],[0,"er\"}"]],"start1":16136,"start2":16136,"length1":11,"length2":13}]],"length":18692,"saved":false}
{"ts":1354433243393,"patch":[[{"diffs":[[0,"cooldown"],[-1,"wrapp"],[1,"tim"],[0,"er\"}, sh"]],"start1":16132,"start2":16132,"length1":21,"length2":19},{"diffs":[[0,", {\"class\":\"shot"],[1,"cooldown"],[0,"wrapper\"}, \"\");\n"]],"start1":16269,"start2":16269,"length1":32,"length2":40}]],"length":18698,"saved":false}
{"ts":1354433382830,"patch":[[{"diffs":[[0,"     shotWrapper"],[1,"Countdown"],[0," = this.helperCr"]],"start1":16066,"start2":16066,"length1":32,"length2":41},{"diffs":[[0,"ide\n            "],[-1,"var "],[0,"shotWrapperInner"]],"start1":16209,"start2":16209,"length1":36,"length2":32},{"diffs":[[0,"tWrapper"],[-1,"Inner"],[0," = this."]],"start1":16228,"start2":16228,"length1":21,"length2":16},{"diffs":[[0,"tWrapper"],[-1,"Inner"],[0,",shotEle"]],"start1":16502,"start2":16502,"length1":21,"length2":16},{"diffs":[[0,"pper"],[-1,"Inner"],[1,"Countdown"],[0,");\n "]],"start1":16631,"start2":16631,"length1":13,"length2":17}]],"length":18697,"saved":false}
{"ts":1354433892743,"patch":[[{"diffs":[[0,"  {\n            "],[1,"var "],[0,"shotWrapperCount"]],"start1":16055,"start2":16055,"length1":32,"length2":36},{"diffs":[[0,"rCreateElement(\""],[-1,"div"],[1,"span"],[0,"\", {\"class\":\"sho"]],"start1":16409,"start2":16409,"length1":35,"length2":36}]],"length":18702,"saved":false}
{"ts":1354433896438,"patch":[[{"diffs":[[0,"rCreateElement(\""],[-1,"div"],[1,"span"],[0,"\", {\"class\":\"sho"]],"start1":16842,"start2":16842,"length1":35,"length2":36}]],"length":18703,"saved":false}
{"ts":1354433918253,"patch":[[{"diffs":[[0,"  {\n            "],[-1,"var "],[0,"shotWrapperCount"]],"start1":16055,"start2":16055,"length1":36,"length2":32},{"diffs":[[0,"tWrapper"],[-1,"Countdown"],[0," = this."]],"start1":16074,"start2":16074,"length1":25,"length2":16},{"diffs":[[0,"rCreateElement(\""],[-1,"span"],[1,"div"],[0,"\", {\"class\":\"sho"]],"start1":16095,"start2":16095,"length1":36,"length2":35},{"diffs":[[0,"down"],[-1,"tim"],[1,"wrapp"],[0,"er\"}, "],[-1,"shot.cooldownTimer"],[1,"\"\""],[0,");\n "]],"start1":16135,"start2":16135,"length1":35,"length2":21},{"diffs":[[0,"ide\n            "],[1,"var "],[0,"shotWrapper = th"]],"start1":16185,"start2":16185,"length1":32,"length2":36},{"diffs":[[0," var shotWrapper"],[1,"Countdown"],[0," = this.helperCr"]],"start1":16200,"start2":16200,"length1":32,"length2":41},{"diffs":[[0,"rCreateElement(\""],[-1,"div"],[1,"span"],[0,"\", {\"class\":\"sho"]],"start1":16238,"start2":16238,"length1":35,"length2":36},{"diffs":[[0,"shotcooldown"],[-1,"wrapp"],[1,"tim"],[0,"er\"}, "],[-1,"\"\""],[1,"shot.cooldownTimer"],[0,");\n         "]],"start1":16271,"start2":16271,"length1":37,"length2":51}]],"length":18703,"saved":false}
{"ts":1354434299438,"patch":[[{"diffs":[[0,"SelectSh"],[-1,"ip"],[1,"ot"],[0," = funct"]],"start1":15692,"start2":15692,"length1":18,"length2":18}]],"length":18703,"saved":false}
{"ts":1354434309289,"patch":[[{"diffs":[[0,"SelectSh"],[-1,"ip"],[1,"ot"],[0,"(\"+index"]],"start1":17053,"start2":17053,"length1":18,"length2":18}]],"length":18703,"saved":false}
{"ts":1354434339491,"patch":[[{"diffs":[[0,"//////////\n    \n"],[1,"    //all the logic behind firing a shot then handing the turn over to the next player\n"],[0,"    this.helperF"]],"start1":18003,"start2":18003,"length1":32,"length2":119}]],"length":18790,"saved":false}
{"ts":1354434482155,"patch":[[{"diffs":[[0,"\", {"],[-1,"\"class\":\"shotcooldownwrapper\""],[0,"}, \""]],"start1":16114,"start2":16114,"length1":37,"length2":8},{"diffs":[[0,"Timer);\n"],[1,"            var shotInnerWrapper = = this.helperCreateElement(\"div\", {\"class\":\"shotcooldownwrapper\"}, \"\");\n"],[0,"        "]],"start1":16276,"start2":16276,"length1":16,"length2":123}]],"length":18868,"saved":false}
{"ts":1354434514691,"patch":[[{"diffs":[[0,"hildElement(shot"],[1,"Inner"],[0,"Wrapper,shotElem"]],"start1":16570,"start2":16570,"length1":32,"length2":37},{"diffs":[[0,"r,shotElement);\n"],[1,"            this.helperAppendChildElement(shotWrapper,shotWrapperCountdown);\n"],[0,"            //ap"]],"start1":16597,"start2":16597,"length1":32,"length2":109},{"diffs":[[0,"per,shot"],[1,"Inner"],[0,"Wrapper"],[-1,"Countdown"],[0,");\n     "]],"start1":16785,"start2":16785,"length1":32,"length2":28}]],"length":18946,"saved":false}
{"ts":1354434519831,"patch":[[{"diffs":[[0,"rapper ="],[-1," ="],[0," this.he"]],"start1":16310,"start2":16310,"length1":18,"length2":16}]],"length":18944,"saved":false}
{"ts":1354434797130,"patch":[[{"diffs":[[0,"ent(\"div\", {"],[-1,""],[0,""],[1,"\"class\":\"shotcooldownwrapper\""],[0,"}, \"\");\n    "]],"start1":16106,"start2":16106,"length1":24,"length2":53},{"diffs":[[0,"r);\n"],[-1,"            var shotInnerWrapper = this.helperCreateElement(\"div\", {\"class\":\"shotcooldownwrapper\"}, \"\");\n"],[0,"    "]],"start1":16309,"start2":16309,"length1":113,"length2":8},{"diffs":[[0,"Element(shot"],[-1,"Inner"],[0,"Wrapper,shot"]],"start1":16496,"start2":16496,"length1":29,"length2":24},{"diffs":[[0,"t);\n"],[-1,"            this.helperAppendChildElement(shotWrapper,shotWrapperCountdown);\n"],[0,"    "]],"start1":16526,"start2":16526,"length1":85,"length2":8},{"diffs":[[0,"shot"],[-1,"Inner"],[0,"Wrapper"],[1,"Countdown"],[0,");\n "]],"start1":16629,"start2":16629,"length1":20,"length2":24}]],"length":18790,"saved":false}
{"ts":1354434993910,"patch":[[{"diffs":[[0,"\", {"],[-1,"\"class\":\"shotcooldownwrapper\""],[0,""],[1,""],[0,"}, \""]],"start1":16114,"start2":16114,"length1":37,"length2":8},{"diffs":[[0,"Timer);\n"],[1,"            var shotInnerWrapper = this.helperCreateElement(\"div\", {\"class\":\"shotcooldownwrapper\"}, \"\");\n"],[0,"        "]],"start1":16276,"start2":16276,"length1":16,"length2":121},{"diffs":[[0,"hildElement(shot"],[1,"Inner"],[0,"Wrapper,shotElem"]],"start1":16568,"start2":16568,"length1":32,"length2":37},{"diffs":[[0,"r,shotElement);\n"],[1,"            this.helperAppendChildElement(shotWrapper,shotWrapperCountdown);\n"],[0,"            //ap"]],"start1":16595,"start2":16595,"length1":32,"length2":109},{"diffs":[[0,"per,shot"],[1,"Inner"],[0,"Wrapper"],[-1,"Countdown"],[0,");\n     "]],"start1":16783,"start2":16783,"length1":32,"length2":28}]],"length":18944,"saved":false}
{"ts":1354435270645,"patch":[[{"diffs":[[0,"shot"],[1,"Inner"],[0,"Wrapper"],[-1,"Countdown"],[0,");\n"],[-1,"            //append cooldown to the wrapper\n"],[0,"    "]],"start1":16665,"start2":16665,"length1":72,"length2":23},{"diffs":[[0,"Wrapper,shot"],[-1,"Inner"],[0,"Wrapper"],[1,"Countdown"],[0,");\n        }"]],"start1":16730,"start2":16730,"length1":36,"length2":40}]],"length":18899,"saved":false}
{"ts":1354439312062,"patch":[[{"diffs":[[0,"nge turn\n       "],[1," var gameOver ="],[0," engine.changePl"]],"start1":18714,"start2":18714,"length1":32,"length2":47},{"diffs":[[0,"ePlayers();\n"],[1,"        if (typeof(gameOver) === 'undefined')\n        {\n            alert(\"The game is over. \" + player + \" wins);\n        }\n"],[0,"        //up"]],"start1":18758,"start2":18758,"length1":24,"length2":149}]],"length":19039,"saved":false}
{"ts":1354439372689,"patch":[[{"diffs":[[0,"ned')\n        {\n"],[1,"            var player = \"Player One\";\n            if(!engine.isFirstPlayer) { player = \"Player Two\"; }\n"],[0,"            aler"]],"start1":18810,"start2":18810,"length1":32,"length2":136}]],"length":19143,"saved":false}
{"ts":1354439434634,"patch":[[{"diffs":[[0," wins);\n"],[1,"            <script type=\"text/javascript\">\n            //redirect to the index\n            window.location = \"/index.html\";\n"],[0,"        "]],"start1":18981,"start2":18981,"length1":16,"length2":141}]],"length":19268,"saved":false}
{"ts":1354439440779,"patch":[[{"diffs":[[0,"s);\n"],[-1,"            <script type=\"text/javascript\">\n"],[0,"    "]],"start1":18985,"start2":18985,"length1":52,"length2":8}]],"length":19224,"saved":false}
{"ts":1354439447549,"patch":[[{"diffs":[[0,"+ \" wins"],[1,"\""],[0,");\n     "]],"start1":18978,"start2":18978,"length1":16,"length2":17}]],"length":19225,"saved":false}
{"ts":1354439461489,"patch":[[{"diffs":[[0,"ePlayers();\n"],[1,"        //check if the game is over\n"],[0,"        if ("]],"start1":18758,"start2":18758,"length1":24,"length2":60}]],"length":19261,"saved":false}
{"ts":1354439467396,"patch":[[{"diffs":[[0,"tion = \""],[1,"."],[0,"/index.h"]],"start1":19085,"start2":19085,"length1":16,"length2":17}]],"length":19262,"saved":false}
{"ts":1354441525143,"patch":[[{"diffs":[[0,"meOver) "],[-1,"="],[1,"!"],[0,"== 'unde"]],"start1":18827,"start2":18827,"length1":17,"length2":17}]],"length":19262,"saved":false}
{"ts":1354441547667,"patch":[[{"diffs":[[0," !== 'undefined'"],[1," && gameOver === true"],[0,")\n        {\n    "]],"start1":18834,"start2":18834,"length1":32,"length2":53}]],"length":19283,"saved":false}
{"ts":1354442316500,"patch":[[{"diffs":[[0,"+ \" wins\");\n"],[1,"            this.updateInterface();\n"],[0,"            "]],"start1":19035,"start2":19035,"length1":24,"length2":60}]],"length":19319,"saved":false}
{"ts":1354444087361,"patch":[[{"diffs":[[1,"/**\n * \n * author Drew Short <nerian.drew@gmail.com>\n */\n"],[0,"function UI(engi"]],"start1":0,"start2":0,"length1":16,"length2":73}]],"length":19376,"saved":false}
{"ts":1354444129357,"patch":[[{"diffs":[[0,"\n * \n * "],[1,"@"],[0,"author D"]],"start1":3,"start2":3,"length1":16,"length2":17}]],"length":19377,"saved":false}
{"ts":1354445009287,"patch":[[{"diffs":[[0,"rt <"],[-1,"nerian.drew@gmail"],[1,"warrick@sothr"],[0,".com"]],"start1":27,"start2":27,"length1":25,"length2":21}]],"length":19373,"saved":false}
{"ts":1354469375869,"patch":[[{"diffs":[[0,"  {\n"],[-1,"            var player = \"Player One\";\n            if(!engine.isFirstPlayer) { player = \"Player Two\"; }\n            alert(\"The game is over. \" + player + \" wins\");\n"],[0,"    "]],"start1":18933,"start2":18933,"length1":172,"length2":8}]],"length":19209,"saved":false}
{"ts":1354469470348,"patch":[[{"diffs":[[0,"    "],[-1,"this.updateInterface();\n            //redirect to the index"],[1,"//redirect to the index because the game is over"],[0,"\n   "]],"start1":18945,"start2":18945,"length1":67,"length2":56}]],"length":19198,"saved":false}
{"ts":1354494557309,"patch":[[{"diffs":[[0,"ngine;\n    \n"],[1,"    //flag for debuggin\n    this.debug = false;\n    \n"],[0,"    ////////"]],"start1":247,"start2":247,"length1":24,"length2":77}]],"length":19251,"saved":false}
{"ts":1354494558285,"patch":[[{"diffs":[[0,"debuggin"],[1,"g"],[0,"\n    thi"]],"start1":274,"start2":274,"length1":16,"length2":17}]],"length":19252,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354495406799,"patch":[[{"diffs":[[0,"  };\n    \n    //"],[-1,""],[0,""],[1,"set attributes on an existing element\n    this.helperAddAttributesToElement = function(element, elementAttributes)\n    {\n        for(var propt in elementAttributes){\n                //add an attribute based on the name with a value from the property\n                element.setAttribute(propt, elementAttributes[propt]);\n            }\n    };\n    \n    //"],[0,"////////////////"]],"start1":2320,"start2":2320,"length1":32,"length2":385},{"diffs":[[0,"hipview\""],[-1,""],[0,""],[1,",\n            availableShotID:\"availableshots\""],[0,"\n       "]],"start1":3107,"start2":3107,"length1":16,"length2":62},{"diffs":[[0,"hipViewID);\n"],[1,"        //create a listing of the shots\n        this.createAvailableShots(params.availableShotID)\n"],[0,"    };\n    \n"]],"start1":3548,"start2":3548,"length1":24,"length2":122},{"diffs":[[0,"//////\n    \n"],[1,"    //show the ship grid\n"],[0,"    this.sho"]],"start1":3786,"start2":3786,"length1":24,"length2":49},{"diffs":[[0,"Grid = function("],[1,"shotGridElementId, shipGridElementId"],[0,")\n    {"],[1,"   "],[0,"\n        documen"]],"start1":3840,"start2":3840,"length1":39,"length2":78},{"diffs":[[0,"   \n        "],[-1,"document.g"],[1,"//set defaults in case the values are not provided\n        if(typeof(shotGridElementId) === 'undefined') { shotGridElementId = \"shot\"; }\n        if(typeof(shipGridElementId) === 'undefined') { shipGridElementId = \"ship\"; }\n        this.helperG"],[0,"etElementByI"]],"start1":3899,"start2":3899,"length1":34,"length2":267},{"diffs":[[0,"rGetElementById("],[-1,"'"],[0,"shot"],[-1,"'"],[1,"GridElementId"],[0,").style.display "]],"start1":4152,"start2":4152,"length1":38,"length2":49},{"diffs":[[0,"e\";\n        "],[-1,"document.g"],[1,"this.helperG"],[0,"etElementByI"]],"start1":4207,"start2":4207,"length1":34,"length2":36},{"diffs":[[0,"rGetElementById("],[-1,"'"],[0,"ship"],[-1,"'"],[1,"GridElementId"],[0,").style.display "]],"start1":4229,"start2":4229,"length1":38,"length2":49},{"diffs":[[0,"k\";\n    };\n    \n"],[1,"    //hide the ship grid\n"],[0,"    this.hideShi"]],"start1":4285,"start2":4285,"length1":32,"length2":57},{"diffs":[[0,"ion("],[-1,")\n    {\n        document.g"],[1,"shotGridElementId, shipGridElementId)\n    {\n        //set defaults in case the values are not provided\n        if(typeof(shotGridElementId) === 'undefined') { shotGridElementId = \"shot\"; }\n        if(typeof(shipGridElementId) === 'undefined') { shipGridElementId = \"ship\"; }\n        this.helperG"],[0,"etEl"]],"start1":4355,"start2":4355,"length1":34,"length2":303},{"diffs":[[0,"yId("],[-1,"'"],[0,"shot"],[-1,"'"],[1,"GridElementId"],[0,").st"]],"start1":4664,"start2":4664,"length1":14,"length2":25},{"diffs":[[0,"        "],[-1,"document.g"],[1,"this.helperG"],[0,"etElemen"]],"start1":4712,"start2":4712,"length1":26,"length2":28},{"diffs":[[0,"yId("],[-1,"'"],[0,"ship"],[-1,"'"],[1,"GridElementId"],[0,").st"]],"start1":4742,"start2":4742,"length1":14,"length2":25},{"diffs":[[0,"oDisplay = \"U\";\n"],[1,"        var typeTitle = \"\";\n"],[0,"        //switch"]],"start1":5103,"start2":5103,"length1":32,"length2":60},{"diffs":[[0," = \"F\";\n"],[1,"                typeTitle = \"Fog Of War\";\n"],[0,"        "]],"start1":5332,"start2":5332,"length1":16,"length2":58},{"diffs":[[0,"play = \"M\";\n"],[1,"                typeTitle = \"Miss\";\n"],[0,"            "]],"start1":5506,"start2":5506,"length1":24,"length2":60},{"diffs":[[0,"play = \"H\";\n"],[1,"                typeTitle = \"Hit\";\n"],[0,"            "]],"start1":5676,"start2":5676,"length1":24,"length2":59},{"diffs":[[0,"lay = \"RM\";\n"],[1,"                typeTitle = \"Revealed Miss\";\n"],[0,"            "]],"start1":5861,"start2":5861,"length1":24,"length2":69},{"diffs":[[0,"lay = \"RH\";\n"],[1,"                typeTitle = \"Revealed Hit\";\n"],[0,"            "]],"start1":6054,"start2":6054,"length1":24,"length2":68},{"diffs":[[0,"pe, \"id\":\"c\" + j"],[1,", title:typeTitle"],[0,"}, typeToDisplay"]],"start1":6213,"start2":6213,"length1":32,"length2":49},{"diffs":[[0,"lementId)\n    {\n"],[1,"        //calculate the grid size to make sure it stays a grid\n        var gridSize = grid.length;\n        var cellPercent = Math.floor(100 / gridSize);\n"],[0,"        //empty "]],"start1":6517,"start2":6517,"length1":32,"length2":185},{"diffs":[[0,"grid[j][i], j);\n"],[1,"                //assign the cell width dynamically based on the grid size\n                gridCell.style.width = cellPercent + \"%\";\n                //assign an on click event to the cell\n                this.helperAddAttributesToElement(gridCell, {\"onclick\":\"UI.helperFireShot(\"+j+\",\"+i+\")\"});\n                //append the cell to the row\n"],[0,"                "]],"start1":7323,"start2":7323,"length1":32,"length2":372},{"diffs":[[0,"   {\n        if("],[-1,"!"],[1,"typeof("],[0,"gridElementId) {"]],"start1":8076,"start2":8076,"length1":33,"length2":39},{"diffs":[[0,"f(gridElementId)"],[1," === 'undefined')"],[0," { gridElementId"]],"start1":8097,"start2":8097,"length1":32,"length2":49},{"diffs":[[0,"oDisplay = \"U\";\n"],[1,"        var typeTitle = \"\";\n"],[0,"        //switch"]],"start1":8482,"start2":8482,"length1":32,"length2":60},{"diffs":[[0,"ay = \"F\""],[-1,""],[0,""],[1,";\n                typeTitle = \"Fog Of War\";"],[0,"\n       "]],"start1":8713,"start2":8713,"length1":16,"length2":59},{"diffs":[[0,"ay = \"M\""],[-1,""],[0,""],[1,";\n                typeTitle = \"Miss\";"],[0,"\n       "]],"start1":8891,"start2":8891,"length1":16,"length2":53},{"diffs":[[0," typeToDisplay ="],[1," type.abbreviation;\n                typeTitle ="],[0," type.name[0];\n "]],"start1":9073,"start2":9073,"length1":32,"length2":79},{"diffs":[[0,"itle = type.name"],[-1,"[0]"],[0,";\n              "]],"start1":9130,"start2":9130,"length1":35,"length2":32},{"diffs":[[0,"y = \"RM\""],[-1,""],[0,""],[1,";\n                typeTitle = \"Revealed Miss\";"],[0,"\n       "]],"start1":9288,"start2":9288,"length1":16,"length2":62},{"diffs":[[0,"RH-\" + type."],[-1,"name[0]"],[1,"abbreviation;\n                typeTitle = \"Revealed Hit\""],[0,";\n          "]],"start1":9486,"start2":9486,"length1":31,"length2":80},{"diffs":[[0,"eToDisplay ="],[1," type.abbreviation;\n            typeTitle ="],[0," type.name[0"]],"start1":9728,"start2":9728,"length1":24,"length2":67},{"diffs":[[0,"name"],[-1,"[0]"],[0,";\n  "]],"start1":9789,"start2":9789,"length1":11,"length2":8},{"diffs":[[0,":\"c\" + j"],[1,", title:typeTitle"],[0,"}, typeT"]],"start1":9883,"start2":9883,"length1":16,"length2":33},{"diffs":[[0,"lementId)\n    {\n"],[1,"        //calculate the grid size to make sure it stays a grid\n        var gridSize = grid.length;\n        var cellPercent = Math.floor(100 / gridSize);\n"],[0,"        //empty "]],"start1":10194,"start2":10194,"length1":32,"length2":185},{"diffs":[[0,"Grid[j][i], j);\n"],[1,"                gridCell.style.width = cellPercent + \"%\";\n"],[0,"                "]],"start1":11021,"start2":11021,"length1":32,"length2":90},{"diffs":[[0,"    "],[-1,"if(!gridElementId"],[1,"//default the value to ship if not provided\n        if(typeof(gridElementId) === 'undefined'"],[0,") { "]],"start1":11502,"start2":11502,"length1":25,"length2":100},{"diffs":[[0,"on(gridElementId"],[-1,")\n    {"],[1,", historyLimit)\n    {\n        //limit of history messages to show a default of 15 unless overridden\n        if (typeof(historyLimit) === 'undefined') { historyLimit = 15; }\n        //default the tag to \"history\"\n        if (typeof(gridElementId) === 'undefined') { gridElementId = \"history\"; }\n        //get the element defined"],[0,"\n        var roo"]],"start1":11984,"start2":11984,"length1":39,"length2":359},{"diffs":[[0,"mit "],[-1,"(aka. recent history otherwise we will over flow, we could also make it a scrollable box)\n            for (var i = 0; "],[1,"\n            for (var i = history.length-1; i >= 0; i--)\n            {\n                //leave loop if we've printed historyLimit messages\n                if ("],[0,"i < "],[1,"("],[0,"hist"]],"start1":13109,"start2":13109,"length1":130,"length2":172},{"diffs":[[0,"ngth"],[-1,"; i++)\n            {"],[1,"-historyLimit))\n                {\n                    break;\n                }"],[0,"\n   "]],"start1":13287,"start2":13287,"length1":28,"length2":86},{"diffs":[[0,"lementId)\n    {\n"],[1,"        if(typeof(shipViewElementId) === 'undefined') { shipViewElementId = \"shipview\"; }\n"],[0,"        //get a "]],"start1":14153,"start2":14153,"length1":32,"length2":122},{"diffs":[[0,"\":\"ship\""],[-1,""],[0,""],[1,", title:ship.name"],[0,"}, \"\");\n"]],"start1":14854,"start2":14854,"length1":16,"length2":33},{"diffs":[[0,"he ship "],[1,"to the root\n            this.helperAppendChildElement(rootElement, shipElement);\n        }\n    };\n    \n    ///////////////////////////////\n    // Available Shots Functions //\n    ///////////////////////////////\n    \n    this.helperSelectShot = function(index)\n    {\n        engine.selectShot(engine.getAvailableShots()[index]);\n        alert(\"selected shot: \" + engine.getAvailableShots()[index].name);\n    };\n    \n    this.helperGetShotElement = function(shot,index)\n    {\n        var shotWrapper;\n        //if the shot isn't available it is on cooldown\n        if (!shot.isAvailable())\n        {\n            shotWrapper = this.helperCreateElement(\"div\", {}, \"\");\n            //text on the outside\n            var shotWrapperCountdown "],[0,"= this.h"]],"start1":15472,"start2":15472,"length1":16,"length2":752},{"diffs":[[0,"span\", {"],[1,"\"class\":\"shotcooldowntimer\""],[0,"}, shot."]],"start1":16244,"start2":16244,"length1":16,"length2":43},{"diffs":[[0,"  //"],[-1,"text on the outside\n          var shotWrapperCountdown  this.helperAppendChildElement(rootElement, shipElementshotInnerWrapper,shotElement"],[1,"now create the shot and add it as a child\n            var shotElement = this.helperCreateElement(\"span\", {\"class\":\"shot\"}, shot.name);\n            this.helperAppendChildElement(shotInnerWrapper,shotElement);\n            this.helperAppendChildElement(shotWrapper,shotInnerWrapper);\n            this.helperAppendChildElement(shotWrapper,shotWrapperCountdown);\n        }\n        //non cooldown shots\n        else\n        {\n            shotWrapper = this.helperCreateElement(\"div\", {\"class\":\"shotwrapper\"}, \"\");\n            var shotElement = this.helperCreateElement(\"span\", {\"class\":\"shot\"}, shot.name);\n            //add the onclick method to the wrapper to select a specific shot\n            this.helperAddAttributesToElement(shotWrapper, {\"onclick\":\"UI.helperSelectShot(\"+index+\")\"}"],[0,");\n "]],"start1":16418,"start2":16418,"length1":146,"length2":790},{"diffs":[[0,"per,"],[1," "],[0,"shot"],[-1,"InnerWrapper);\n"],[1,"Element);\n        }\n        return shotWrapper;\n    };\n    \n    //method to create the shot listing\n    this.createAvailableShots = function(availableShotsElementId)\n    {\n        if(typeof(availableShotsElementId) === 'undefined') { availableShotsElementId = \"availableshots\"; }\n        var rootElement = this.helperGetElementById(availableShotsElementId);\n        //empty the element\n        this.helperEmptyElement(rootElement);\n        //get array of shots for the player\n        var shots = engine.getAvailableShots();\n        //loop through all the shots\n        for (var i = 0; i < shots.length; i++)\n        {\n            var shot = this.helperGetShotElement(shots[i], i);\n    "],[0,"       "],[1," "],[0,"this"]],"start1":17257,"start2":17257,"length1":34,"length2":706},{"diffs":[[0,"ent("],[-1,"shotWrapper,shotWrapperCountdown);"],[1,"rootElement, shot);\n        }\n    };\n    \n    ////////////////////////////////\n    // Shot Grid Firing Functions //\n    ////////////////////////////////\n    \n    //all the logic behind firing a shot then handing the turn over to the next player\n    this.helperFireShot = function(x,y)\n    {\n        //fire the shot\n        var result = engine.fireShot(x,y);\n        //if the result of the shot is undefined, then the shot failed because the user didn't select a shot. let them try again\n        if (typeof(result) === 'undefined') { return; }\n        //show the alerts\n        var hist = engine.getShotHistory();\n        alert(\"ending turn for \" + hist[hist.length-1]);\n        alert(\"I'm really changing turn now. Don't Cheat.\");\n        //change turn\n        var gameOver = engine.changePlayers();\n        //check if the game is over\n        if (typeof(gameOver) !== 'undefined' && gameOver === true)\n        {"],[0,"\n   "]],"start1":17985,"start2":17985,"length1":42,"length2":920},{"diffs":[[0,"  }\n    "],[-1,"};"],[1,"    //update ui\n        this.updateInterface();\n    };\n    "],[0,"\n}\n\n//cr"]],"start1":19015,"start2":19015,"length1":18,"length2":75}]],"length":19163,"saved":false}
{"ts":1354495710603,"patch":[[{"diffs":[[0,"eShotID)"],[1,";"],[0,"\n    };\n"]],"start1":3649,"start2":3649,"length1":16,"length2":17}]],"length":19253,"saved":false}
{"ts":1354495800383,"patch":[[{"diffs":[[0,"ow/Hide "],[-1,"Ship "],[0,"Grids Fu"]],"start1":3721,"start2":3721,"length1":21,"length2":16},{"diffs":[[0,"e\";\n    };\n    \n"],[1,"    this.hideGrids = function(shotGridElementId, shipGridElementId)\n    {\n        \n    }\n    \n    this.showGrids = function(shotGridElementId, shipGridElementId)\n    {\n        \n    }\n    \n"],[0,"    ////////////"]],"start1":4781,"start2":4781,"length1":32,"length2":220}]],"length":19436,"saved":false}
{"ts":1354495804157,"patch":[[{"diffs":[[0,"{\n        \n    }"],[1,";"],[0,"\n    \n    this.s"]],"start1":4869,"start2":4869,"length1":32,"length2":33},{"diffs":[[0,"      \n    }"],[1,";"],[0,"\n    \n    //"]],"start1":4968,"start2":4968,"length1":24,"length2":25}]],"length":19438,"saved":false}
{"ts":1354495870045,"patch":[[{"diffs":[[0,"e\";\n    };\n    \n"],[1,"    //hide both grids\n"],[0,"    this.hideGri"]],"start1":4781,"start2":4781,"length1":32,"length2":54},{"diffs":[[0,"  {\n        "],[-1,"\n    }"],[1,"if(typeof(shotGridElementId) === 'undefined') { shotGridElementId = \"shot\"; }\n        if(typeof(shipGridElementId) === 'undefined') { shipGridElementId = \"ship\"; }\n        this.helperGetElementById(shotGridElementId).style.display = \"none\""],[0,";\n    "],[-1,"\n"],[0,"    this.sho"]],"start1":4889,"start2":4889,"length1":37,"length2":269},{"diffs":[[0,"his."],[-1,"showGrids = function(shotGridElementId, shipGridElementId)\n    {\n        "],[1,"helperGetElementById(shipGridElementId).style.display = \"none\";\n    };\n    \n    //\n    this.resetGrids = function(shotGridElementId, shipGridElementId)\n    {\n        if(typeof(shotGridElementId) === 'undefined') { shotGridElementId = \"shot\"; }\n        if(typeof(shipGridElementId) === 'undefined') { shipGridElementId = \"ship\"; }\n        this.helperGetElementById(shotGridElementId).style.display = \"block\";\n        this.helperGetElementById(shipGridElementId).style.display = \"block\";"],[0,"\n   "]],"start1":5151,"start2":5151,"length1":81,"length2":493}]],"length":20104,"saved":false}
{"ts":1354495871027,"patch":[[{"diffs":[[0," \n    //"],[1,"re"],[0,"\n    thi"]],"start1":5229,"start2":5229,"length1":16,"length2":18}]],"length":20106,"saved":false}
{"ts":1354495885851,"patch":[[{"diffs":[[0,"    //re"],[1,"turn to the default state of showing the shot grid and hiding the ship grid"],[0,"\n    thi"]],"start1":5231,"start2":5231,"length1":16,"length2":91}]],"length":20181,"saved":false}
{"ts":1354495903107,"patch":[[{"diffs":[[0,"length-1]);\n"],[1,"        this.hideGrids();\n"],[0,"        aler"]],"start1":19665,"start2":19665,"length1":24,"length2":50}]],"length":20207,"saved":false}
{"ts":1354495913104,"patch":[[{"diffs":[[0,"t Cheat.\");\n"],[1,"        this.resetGrids();\n"],[0,"        //ch"]],"start1":19752,"start2":19752,"length1":24,"length2":51}]],"length":20234,"saved":false}
